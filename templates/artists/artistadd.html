{% extends 'base.html' %}

{% load crispy_forms_tags %}

{% block style %}
{% endblock %}

{% block content %}
<div class="container">
    <nav aria-label="breadcrumb" class="m-3">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>        
            <li class="breadcrumb-item active" aria-current="page">Add new artist</li>
        </ol>
    </nav> 
    <div class="border rounded m-3 p-3">
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="form-row">
                <div class="form-group col-md-9">
                    <label for="name">Name</label>
                    <input type="text" class="form-control" id="name" name="name" placeholder="John Doe" >
                    <br>
                    <label for="bio">Biography</label>
                    <textarea class="form-control" rows="5" id="bio" name="bio" placeholder="Biography"></textarea>
                </div>
                <div class="form-group col-md-3">
                    <label for="custom-file-image">Image</label>
                    <div class="border d-flex justify-content-center" style="width: 100%; height: 180px;">
                        <img id="imagefield" src="" style="height: 100%; width: auto;">
                    </div>  
                    <div class="custom-file mt-2" id="custom-file-image">
                        <input type="file" class="custom-file-input" name="image" id="image">
                        <label class="custom-file-label" for="image">Choose file</label>
                    </div>
                </div>  
            </div>                                
            <div class="form-row">
                <div class="form-group col-md-4">
                    <label for="birthplace">Birth place</label>
                    <input type="text" class="form-control" name="birthplace" id="birthplace">
                </div>
                <div class="form-group col-md-4">
                    <label for="birthdate">Birth date</label>
                    <input type="date" class="form-control" name="birthdate" id="birthdate">
                </div>
                <div class="form-group col-md-4">
                    <label for="nationality">Nationality</label>
                    <input type="text" class="form-control" name="nationality" id="nationality">
                </div>
            </div>
            <label>Occupation</label>
            <div class="form-row">                
                {% for occ in occupations %}
                <div class="form-group col-12 col-sm-6 col-md-3 col-lg-2 mb-3">
                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="occupationCheck{{ occ.id }}" name="occupation" value="{{ occ.id }}">
                        <label class="custom-control-label" for="occupationCheck{{ occ.id }}">{{ occ.name }}</label>
                    </div>
                </div>
                {% endfor %}
            </div>                     
            <button type="submit" class="btn btn-success">Save</button>
        </form>
    </div>    
</div>
{% endblock %}

{% block javascript %}
<script>
    $("#image").change(function () {
        if (this.files && this.files[0]) {
            var reader = new FileReader();
            reader.onload = function(e) {
                $("#imagefield").attr('src', e.target.result);
            }
            reader.readAsDataURL(this.files[0]);
        }
    });
</script>
{% endblock %}