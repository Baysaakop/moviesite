{% extends 'base.html' %}
{% load static custom_tags movie_tags i18n %}

{% block title %}
Mollywood
{% endblock %}

{% block style %}
<link rel="stylesheet" href="{% static 'css/list.css' %}">
{% endblock %}

{% block content %}
<!-- <div class="jumbotron text-center" style="margin-bottom:0">
    <h1>My First Bootstrap 4 Page</h1>
    <p>Resize this responsive page to see the effect!</p> 
</div> -->

<div style="margin-top:30px">     
    <div id="carousel" class="carousel slide m-3 p-3" data-ride="carousel">
        <ul class="carousel-indicators">
            <li data-target="#carousel" data-slide-to="0" class="active"></li>
            <li data-target="#carousel" data-slide-to="1"></li>
            <li data-target="#carousel" data-slide-to="2"></li>
        </ul>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <a href="{% url 'moviedetail' 238 %}">
                    <img src="{% static 'images/batman_begins_2-wallpaper-1920x1080.jpg' %}" alt="Batman Begins" style="width: 100%; height: auto;">
                </a>
                <div class="carousel-caption">
                    <p class="carousel-title">Batman Begins</p>
                    <p class="carousel-description">Directed by Christopher Nolan</p>
                </div>
            </div>
            <div class="carousel-item">
                <a href="{% url 'moviedetail' 194 %}">
                    <img src="{% static 'images/batman_the_dark_knight_3-wallpaper-1920x1080.jpg' %}" alt="Dark Knight" style="width: 100%; height: auto;">
                </a>
                <div class="carousel-caption">
                    <p class="carousel-title">The Dark Knight</p>
                    <p class="carousel-description">Directed by Christopher Nolan</p>
                </div>
            </div>
            <div class="carousel-item">
                <a href="{% url 'moviedetail' 224 %}">
                    <img src="{% static 'images/the_dark_knight_rises_2013-wallpaper-1920x1080.jpg' %}" alt="Dark Knight Rises" style="width: 100%; height: auto;">
                </a>
                <div class="carousel-caption">
                    <p class="carousel-title">The Dark Knight Rises</p>
                    <p class="carousel-description">Directed by Christopher Nolan</p>
                </div>
            </div>
        </div>
        <a class="carousel-control-prev" href="#carousel" data-slide="prev">
            <span class="carousel-control-prev-icon"></span>
        </a>
        <a class="carousel-control-next" href="#carousel" data-slide="next">
            <span class="carousel-control-next-icon"></span>
        </a>
    </div>
    <div class="container">
        <div id="newmovies" class="m-3 p-3">
            <div class="row">
                <div class="col-12 col-md-10">
                    <h4 class="listTitle">{% trans 'Newly added movies' %}</h4>
                </div>
                <div class="col-12 col-md-2 text-md-right">
                    <a href="{% url 'movielist' %}" class="listBtn btn btn-dark btn-block">{% trans 'Show more' %}</a>
                </div>
            </div>        
            <div class="row rowlist mt-3">
                {% for movie in newmovies %}
                <div class="col-6 col-sm-4 col-md-3 col-lg-2 mb-3" >
                    <a href="{% url 'moviedetail' movie.pk %}">
                        <div class="card mb-0">                                     
                            {% if movie.poster %}
                            <img class="card-img" src="{{ movie.image.url }}" alt="Card image">
                            {% else %}
                            <div class="card-img" style="min-height: 220px;">
                                <div class="title d-flex justify-content-center align-items-center text-center">
                                    <h5 class="card-title" style="color: #000;">{{ movie }}</h5>                                
                                </div>
                            </div>
                            {% endif %}   
                            <div class="card-img-overlay">                
                                <div class="title d-flex justify-content-center align-items-center text-center">
                                    <h6 class="card-title text-center">{{ movie }}</h6>
                                </div>
                                <div class="actions d-flex justify-content-start p-0 text-center">
                                    {% if profile is None %}
                                    <a href="{% url 'account_login' %}" class="action p-2" style="width: 33%;" title="{% trans 'Add to Favorite' %}">
                                        <i class="fa fa-thumbs-o-up"></i>
                                    </a>
                                    <a href="{% url 'account_login' %}" class="action p-2" style="width: 33%;" title="{% trans 'Add to Watched' %}">
                                        <i class="fa fa-eye"></i>
                                    </a>
                                    <a href="{% url 'account_login' %}" class="action p-2" style="width: 33%;" title="{% trans 'Add to Watchlist' %}">
                                        <i class="fa fa-plus-circle"></i>
                                    </a>
                                    {% else %}
                                    <a id="favorite{{ movie.id }}" href="#" class="action favorite p-2" style="width: 33%;" data-id="{{ movie.id }}"
                                        title="{% if movie|is_favorite:profile %} Remove from Favorite {% else %} Add to Favorite {% endif %}">
                                        <i id="icon-favorite{{ movie.id }}" class="{% if movie|is_favorite:profile %} fa fa-thumbs-up {% else %} fa fa-thumbs-o-up {% endif %}"></i>
                                    </a>
                                    <a id="watched{{ movie.id }}" href="#" class="action watched p-2" style="width: 33%;" data-id="{{ movie.id }}"
                                        title="{% if movie|is_watched:profile %} Remove from Watched {% else %} Add to Watched {% endif %}">
                                        <i id="icon-watched{{ movie.id }}" class="{% if movie|is_watched:profile %} fa fa-eye-slash {% else %} fa fa-eye {% endif %}"></i>
                                    </a>
                                    <a id="watchlist{{ movie.id }}" href="#" class="action watchlist p-2" style="width: 33%;" data-id="{{ movie.id }}"
                                        title="{% if movie|is_watchlisted:profile %} Remove from Watchlist {% else %} Add to Watchlist {% endif %}">
                                        <i id="icon-watchlist{{ movie.id }}" class="{% if movie|is_watchlisted:profile %} fa fa-minus-circle {% else %} fa fa-plus-circle {% endif %}"></i>
                                    </a>
                                    {% endif %}
                                </div>
                            </div>                                                                                                         
                        </div>   
                        <div class="p-2 border bg-light">
                            <div class="name" style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                                <smalls style="font-weight: bold;">{{ movie }}</smalls>  
                            </div>       
                            <div class="release">
                                <small style="font-weight: bold;">Release: {{ movie.release_date|date:"Y" }}</small>
                            </div>    
                            <div class="imdb">
                                <small style="font-weight: bold;">Score: {{ movie.score }}</small>       
                            </div>                                                                                                   
                        </div>               
                    </a>                                        
                </div>       
                {% endfor %}
            </div>
        </div>
        <div id="topmovies" class="m-3 p-3">
            <div class="row">
                <div class="col-12 col-md-10">
                    <h4 class="listTitle">{% trans 'Top rated movies' %}</h4>
                </div>
                <div class="col-12 col-md-2 text-md-right">
                    <a href="{% url 'movielist' %}" class="listBtn btn btn-dark btn-block">{% trans 'Show more' %}</a>
                </div>
            </div>
            <div class="row rowlist mt-3">
                {% for movie in topratedmovies %}
                <div class="col-6 col-sm-4 col-md-3 col-lg-2 mb-3" >
                    <a href="{% url 'moviedetail' movie.pk %}">
                        <div class="card mb-0">                                     
                            {% if movie.poster %}
                            <img class="card-img" src="{{ movie.image.url }}" alt="Card image">
                            {% else %}
                            <div class="card-img" style="min-height: 220px;">
                                <div class="title d-flex justify-content-center align-items-center text-center">
                                    <h5 class="card-title" style="color: #000;">{{ movie }}</h5>                                
                                </div>
                            </div>
                            {% endif %}   
                            <div class="card-img-overlay">                
                                <div class="title d-flex justify-content-center align-items-center text-center">
                                    <h6 class="card-title text-center">{{ movie }}</h6>
                                </div>
                                <div class="actions d-flex justify-content-start p-0 text-center">
                                    {% if profile is None %}
                                    <a href="{% url 'account_login' %}" class="action p-2" style="width: 33%;" title="{% trans 'Add to Favorite' %}">
                                        <i class="fa fa-thumbs-o-up"></i>
                                    </a>
                                    <a href="{% url 'account_login' %}" class="action p-2" style="width: 33%;" title="{% trans 'Add to Watched' %}">
                                        <i class="fa fa-eye"></i>
                                    </a>
                                    <a href="{% url 'account_login' %}" class="action p-2" style="width: 33%;" title="{% trans 'Add to Watchlist' %}">
                                        <i class="fa fa-plus-circle"></i>
                                    </a>
                                    {% else %}
                                    <a id="favorite{{ movie.id }}" href="#" class="action favorite p-2" style="width: 33%;" data-id="{{ movie.id }}"
                                        title="{% if movie|is_favorite:profile %} Remove from Favorite {% else %} Add to Favorite {% endif %}">
                                        <i id="icon-favorite{{ movie.id }}" class="{% if movie|is_favorite:profile %} fa fa-thumbs-up {% else %} fa fa-thumbs-o-up {% endif %}"></i>
                                    </a>
                                    <a id="watched{{ movie.id }}" href="#" class="action watched p-2" style="width: 33%;" data-id="{{ movie.id }}"
                                        title="{% if movie|is_watched:profile %} Remove from Watched {% else %} Add to Watched {% endif %}">
                                        <i id="icon-watched{{ movie.id }}" class="{% if movie|is_watched:profile %} fa fa-eye-slash {% else %} fa fa-eye {% endif %}"></i>
                                    </a>
                                    <a id="watchlist{{ movie.id }}" href="#" class="action watchlist p-2" style="width: 33%;" data-id="{{ movie.id }}"
                                        title="{% if movie|is_watchlisted:profile %} Remove from Watchlist {% else %} Add to Watchlist {% endif %}">
                                        <i id="icon-watchlist{{ movie.id }}" class="{% if movie|is_watchlisted:profile %} fa fa-minus-circle {% else %} fa fa-plus-circle {% endif %}"></i>
                                    </a>
                                    {% endif %}
                                </div>
                            </div>                                                                                                         
                        </div>   
                        <div class="p-2 border bg-light">
                            <div class="name" style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                                <smalls style="font-weight: bold;">{{ movie }}</smalls>  
                            </div>       
                            <div class="release">
                                <small style="font-weight: bold;">Release: {{ movie.release_date|date:"Y" }}</small>
                            </div>    
                            <div class="imdb">
                                <small style="font-weight: bold;">Score: {{ movie.score }}</small>       
                            </div>                                                                                                   
                        </div>               
                    </a>                                        
                </div>       
                {% endfor %}
            </div>                
        </div>
    </div>
</div>
{% endblock %}
